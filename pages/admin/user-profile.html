<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usu√°rio</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/admin.css">
</head>
<body class="dashboard-page">
    <div class="page-container">
        <div class="page-header">
            <button onclick="window.location.href='manage-users.html'" class="btn-back">‚Üê Voltar</button>
            <h1 id="userNameTitle">Perfil do Usu√°rio</h1>
            <div class="profile-actions">
                <button id="viewStatsBtn" class="btn-action">üìä Ver Estat√≠sticas</button>
                <button id="editUserBtn" class="btn-action">‚úèÔ∏è Editar</button>
                <button id="deactivateUserBtn" class="btn-action btn-warning">üö´ Desativar</button>
                <button id="deleteUserBtn" class="btn-action btn-danger">üóëÔ∏è Excluir Usu√°rio</button>
            </div>
        </div>

        <div class="page-content">
            <!-- Informa√ß√µes do Perfil -->
            <div class="profile-info-card" id="profileInfoCard">
                <p class="loading">Carregando perfil...</p>
            </div>

            <!-- Lista de Exerc√≠cios -->
            <div class="exercises-section">
                <div class="section-header">
                    <h2>Exerc√≠cios Realizados</h2>
                    <div class="stats-filters">
                        <div class="year-filter">
                            <label for="yearSelect">Ano:</label>
                            <select id="yearSelect">
                                <!-- Ser√° preenchido dinamicamente -->
                            </select>
                        </div>
                        <div class="month-selector">
                            <button id="prevMonth" class="btn-month">‚óÑ</button>
                            <span id="currentMonth"></span>
                            <button id="nextMonth" class="btn-month">‚ñ∫</button>
                        </div>
                    </div>
                </div>
                <div class="exercises-list" id="exercisesList">
                    <p class="loading">Carregando exerc√≠cios...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edi√ß√£o -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Editar Usu√°rio</h2>
            
            <form id="editUserForm">
                <div class="form-section">
                    <h3>Informa√ß√µes B√°sicas</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit_name">Nome Completo *</label>
                            <input type="text" id="edit_name" required>
                        </div>
                        <div class="form-group">
                            <label for="edit_email">Email *</label>
                            <input type="email" id="edit_email" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit_age">Idade</label>
                            <input type="number" id="edit_age" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label for="edit_gender">G√™nero</label>
                            <select id="edit_gender">
                                <option value="">Selecione...</option>
                                <option value="Masculino">Masculino</option>
                                <option value="Feminino">Feminino</option>
                                <option value="Outro">Outro</option>
                                <option value="Prefiro n√£o informar">Prefiro n√£o informar</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Informa√ß√µes Cl√≠nicas (Opcional)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit_sci_cause">Causa da Les√£o</label>
                            <input type="text" id="edit_sci_cause" placeholder="Ex: Traum√°tica">
                        </div>
                        <div class="form-group">
                            <label for="edit_sci_level">N√≠vel da Les√£o</label>
                            <input type="text" id="edit_sci_level" placeholder="Ex: C5-C6">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit_sci_category">Categoria</label>
                            <input type="text" id="edit_sci_category" placeholder="Ex: Tetraplegia">
                        </div>
                        <div class="form-group">
                            <label for="edit_sci_severity">Severidade</label>
                            <input type="text" id="edit_sci_severity" placeholder="Ex: Completa">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit_sci_class">Classe ASIA</label>
                        <select id="edit_sci_class">
                            <option value="">Selecione...</option>
                            <option value="A">A - Completa</option>
                            <option value="B">B - Sensitiva Incompleta</option>
                            <option value="C">C - Motora Incompleta</option>
                            <option value="D">D - Motora Incompleta</option>
                            <option value="E">E - Normal</option>
                        </select>
                    </div>
                </div>

                <div class="error-message" id="editErrorMessage"></div>
                <div class="success-message" id="editSuccessMessage"></div>

                <button type="submit" class="btn-primary">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../js/supabase-config.js"></script>
    <script src="../../js/admin/user-profile.js"></script>
</body>
</html>